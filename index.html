<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book a Service | WhiteGlove Residential Care</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Kugile&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; font-family: 'Montserrat', sans-serif; }
    body { margin: 0; background: #f5f5f5; color: #222; display: flex; justify-content: center; align-items: center; min-height: 100vh; }

    .booking-container {
      background: #ffffff;
      width: 100%;
      max-width: 520px;
      padding: 40px 30px;
      border-radius: 12px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.08);
      display: flex; flex-direction: column; gap: 20px;
    }

    .logo { text-align: center; margin-bottom: 25px; }
    .logo h1 {
      font-family: 'Kugile', sans-serif;
      font-weight: normal;
      font-size: 36px;
      letter-spacing: 2px;
      color: #000;
      margin: 0;
      text-transform: uppercase;
    }
    .logo p { font-size: 13px; color: #555; margin-top: 6px; letter-spacing: 1px; }

    h2 { text-align: center; font-weight: 500; margin: 20px 0; font-size: 20px; }

    form { display: flex; flex-direction: column; gap: 20px; }

    label { font-size: 14px; color: #555; margin-bottom: 6px; display: block; }
    input, select, textarea { padding: 12px 14px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; width: 100%; }
    input:focus, select:focus, textarea:focus { outline: none; border-color: #DE3163; }
    textarea { resize: none; height: 80px; }

    #price-box { display: none; padding: 14px; border: 1px solid #eee; border-radius: 8px; background: #fafafa; margin-top: -5px; border-left: 4px solid #DE3163; }
    #price { font-size: 18px; margin-top: 6px; color: #DE3163; }

    button { margin-top: 10px; padding: 14px; background: #DE3163; color: #fff; border: none; border-radius: 8px; font-size: 15px; font-weight: 500; cursor: pointer; width: 100%; }
    button:hover { opacity: 0.9; }

    .thank-you { display: none; text-align: center; font-size: 16px; color: #DE3163; margin-top: 20px; }

    @media (max-width: 480px) {
      .booking-container { padding: 30px 20px; }
      h2 { font-size: 18px; }
      .logo h1 { font-size: 28px; letter-spacing: 1px; }
    }

    /* Page fade-in */
    body {
      opacity: 0;
      animation: fadeIn 1.2s ease forwards;
    }
    @keyframes fadeIn {
      to { opacity: 1; }
    }

    /* Sparkle */
    .sparkle {
      position: fixed;
      width: 6px;
      height: 6px;
      background: #DE3163;
      border-radius: 50%;
      pointer-events: none;
      animation: sparkle-animation 1.5s ease-out forwards;
      z-index: 9999;
      box-shadow: 0 0 10px #DE3163;
    }
    @keyframes sparkle-animation {
      0% { opacity: 1; transform: scale(1); }
      100% { opacity: 0; transform: scale(3) translateY(-40px); }
    }
  </style>
</head>
<body>

<div class="booking-container">
  <div class="logo">
    <h1>WhiteGlove Residential Care</h1>
    <p>Executive Home Services</p>
  </div>

  <h2>Book a Service</h2>

  <form id="bookingForm">
    <div>
      <label>Full Name</label>
      <input type="text" placeholder="Enter your full name" required />
    </div>
    <div>
      <label>Phone Number</label>
      <input type="tel" placeholder="e.g. 0711 100 200" pattern="^(07|01)\d{8}$" required />
    </div>
    <div>
      <label>Location / Estate</label>
      <input type="text" placeholder="e.g. Nyari, Westlands" required />
    </div>
    <div>
      <label>Service Type</label>
      <select id="service" required onchange="updateSizes()">
        <option value="">Select a service</option>
        <option value="basic">Basic Cleaning</option>
        <option value="deep">Deep Cleaning</option>
        <option value="afterparty">After Party Clean-Up</option>
        <option value="move">Moving In / Out Cleaning</option>
        <option value="office">Office Cleaning</option>
      </select>
    </div>
    <div id="size-container" style="display:none;">
      <label>House / Office Size</label>
      <select id="size" onchange="updatePrice()">
        <option value="">Select size</option>
      </select>
    </div>
    <div id="price-box">
      <strong>Estimated Cost:</strong>
      <div id="price">KES 0</div>
      <small style="color:#777;">
        Includes standard transport within Nairobi and Supplies.<br>
      </small>
    </div>
    <div>
      <label>Preferred Date</label>
      <input type="date" id="dateInput" required />
    </div>
    <div>
      <label>Additional Notes</label>
      <textarea placeholder="Any special instructions?"></textarea>
    </div>
    <button type="submit">Confirm Booking</button>
  </form>

  <div class="thank-you" id="thankYouMessage">
    Thank you for choosing WhiteGlove Residential Care.<br />
    Your booking has been received.
  </div>
</div>

<!-- Sparkle Sound -->
<audio id="openSound" src="sounds/chime.mp3" preload="auto"></audio>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  emailjs.init("PlGk7JPI9lizf8rwF");

const prices = {
  basic: { 'Studio': 3200, '1 Bedroom': 3800, '2 Bedroom': 4800, '3 Bedroom': 6000, '4 Bedroom': 8000, '5 Bedroom': 10000, '6 Bedroom': 12000 },
  deep: { 'Studio': 6500, '1 Bedroom': 7500, '2 Bedroom': 9200, '3 Bedroom': 11500, '4 Bedroom': 14000, '5 Bedroom': 17000, '6 Bedroom': 20000 },
  afterparty: { 'Studio / 1 Bedroom': 7500, '2 Bedroom': 9500, '3 Bedroom': 12000, '4 Bedroom': 15000, '5 Bedroom': 18000, '6 Bedroom': 22000 },
  move: { 'Studio': 4500, '1 Bedroom': 5500, '2 Bedroom': 7000, '3 Bedroom': 9000, '4 Bedroom': 11000, '5 Bedroom': 13000, '6 Bedroom': 15000 },
  office: { 'Small Office (1–5 staff)': 7500, 'Medium Office (6–15 staff)': 11000, 'Large Office (16–30 staff)': 16000, 'Corporate Office (30+ staff)': 22000 }
};

function updateSizes() {
  const service = document.getElementById('service').value;
  const sizeSelect = document.getElementById('size');
  sizeSelect.innerHTML = '<option value="">Select size</option>';
  if (service && prices[service]) {
    for (const size in prices[service]) {
      const option = document.createElement('option');
      option.value = size;
      option.textContent = size;
      sizeSelect.appendChild(option);
    }
    document.getElementById('size-container').style.display = 'block';
  } else {
    document.getElementById('size-container').style.display = 'none';
  }
  document.getElementById('price-box').style.display = 'none';
}

function updatePrice() {
  const service = document.getElementById('service').value;
  const size = document.getElementById('size').value;
  if (service && size && prices[service][size]) {
    document.getElementById('price').textContent = 'KES ' + prices[service][size].toLocaleString();
    document.getElementById('price-box').style.display = 'block';
  } else {
    document.getElementById('price-box').style.display = 'none';
  }
}

const today = new Date().toISOString().split('T')[0];
document.getElementById('dateInput').setAttribute('min', today);

// EmailJS submission
document.getElementById('bookingForm').addEventListener('submit', function(e) {
  e.preventDefault();

  const templateParams = {
    name: document.querySelector('input[placeholder="Enter your full name"]').value,
    phone: document.querySelector('input[type="tel"]').value,
    location: document.querySelector('input[placeholder="e.g. Nyari, Westlands"]').value,
    service: document.getElementById('service').selectedOptions[0].text,
    size: document.getElementById('size').value,
    price: document.getElementById('price').textContent,
    date: document.getElementById('dateInput').value,
    notes: document.querySelector('textarea').value || 'None'
  };

  emailjs.send('service_0mrf039', 'template_vp0wdrw', templateParams)
    .then(() => {
      document.getElementById('bookingForm').style.display = 'none';
      document.getElementById('thankYouMessage').style.display = 'block';
    })
    .catch((error) => {
      alert('Something went wrong. Please try again or contact us directly.');
      console.error('EmailJS error:', error);
    });
});

// Sparkle effect on page load
window.addEventListener("load", function() {
  for (let i = 0; i < 35; i++) {
    let sparkle = document.createElement("div");
    sparkle.classList.add("sparkle");
    sparkle.style.left = Math.random() * window.innerWidth + "px";
    sparkle.style.top = Math.random() * window.innerHeight + "px";
    document.body.appendChild(sparkle);
    setTimeout(() => sparkle.remove(), 1500);
  }
});

// Play sound on first click
document.addEventListener("click", function playSoundOnce() {
  const sound = document.getElementById("openSound");
  sound.volume = 0.4;
  sound.play();
  document.removeEventListener("click", playSoundOnce);
});
</script>

</body>
</html>

